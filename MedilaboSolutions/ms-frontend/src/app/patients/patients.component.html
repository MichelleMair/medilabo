<h1>Patients</h1>
<p *ngIf="patients && patients.length === 0">Aucun patient trouvé</p>
<table border="1">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Age</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody *ngIf="patients && patients.length > 0; else noPatients">
        <ng-container *ngFor="let patient of patients">
            <tr *ngIf="patient.id">
                <td>{{ patient.id }}</td>
                <td>{{ patient.lastName }}  {{ patient.firstName}}</td>
                <td>{{ patient.age }}</td>
                <td>
                    <button (click)="viewNotes(patient.patId)">View notes</button>
                    <button (click)="editPatient(patient)">Edit</button>
                    <button (click)="deletePatient(patient.id)">Delete</button>
                </td>
            </tr>
        </ng-container>
    </tbody>
</table>

<div *ngIf="selectedPatientNotes && selectedPatientNotes.length > 0">
    <h2>Notes for Patient with ID:  {{ selectedPatientId }}</h2>
    <ul>
        <li *ngFor="let note of selectedPatientNotes">
            {{note.note}}
        </li>
    </ul>
    <div *ngIf="!selectedPatientNotes || selectedPatientNotes.length == 0">
        <p>No notes found for this patient</p>
    </div>
    <h3>Add a new note</h3>
    <textarea [(ngModel)]="newNoteContent"></textarea>
    <button (click)="addNote()">Add note</button>
</div>
<ng-template #noPatients>
    <tr>
        <td colspan="4">Aucun patient trouvé</td>
    </tr>
</ng-template>
